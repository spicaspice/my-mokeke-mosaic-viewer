セッション記録（2025-09-04）

目的
- `mokekelist.txt` を元にコレクション一覧を管理できる静的サイトを作成。

本日実施
- 追加: `index.html:1` UI（検索/絞り込み/カテゴリ/ヘルプ/フッターステータス）。
- 追加: `styles.css:1` ダークテーマのスタイル。
- 追加: `app.js:1` 読み込み/パース/描画/進捗保存(localStorage)。
  - 文字コード自動判定: UTF-8/Shift_JIS/UTF-16LE/BE。
  - フォーマット自動判定: セクション形式 or TSV(タブ区切り)。
  - 「進捗インポート/エクスポート」対応。
  - 「リスト読込」ボタン＋ドラッグ&ドロップ対応。
  - フッターにステータス表示（選択ファイル名、件数、エラーなど）。
- 追加: `README.md:1` 使い方・書式説明。

現状・未解決点
- ユーザー環境で「リスト読込」ボタンが反応しない／ドロップで txt がそのまま開く事象。
  - 対策として document 全体で dragover/drop を抑止、onclick フォールバックでファイルダイアログを開くように変更済み。
  - それでも反応なしとの報告。要現地再現・デベロッパーツールでのエラーログ確認が必要。

再現・確認手順
- 推奨: 簡易サーバで起動して検証。
  1) PowerShell などで `cd D:\01_Dev\projects\202509_mokeke`
  2) `py -m http.server 8000`（または `python -m http.server 8000`）
  3) ブラウザで `http://localhost:8000/` を開く
  4) 右上「リスト読込」で `mokekelist.txt` を選択、またはページにドラッグ&ドロップ
  5) フッター右に「選択: ファイル名」→「N 件を読み込みました」が出るか確認

想定される原因（仮説）
- 1) ブラウザ拡張やセキュリティポリシーが programmatic click をブロック
- 2) ドラッグ&ドロップの抑止が環境依存で効いていない（古い Edge/Chrome）
- 3) `app.js` の読み込みが CSP/ローカルファイル制限で失敗（コンソールエラー要確認）
- 4) `mokekelist.txt` の内容が非TSV・非セクション形式で全列が空扱いになっている

次回の進め方（TODO）
- A) 画面に「貼り付け読み込み」のテキストエリアを追加（ファイル操作なしで検証可能に）
- B) デバッグUI（コンソールログ表示領域）を設置してイベント発火を可視化
- C) `window` レベルの drop/navigation 抑止を強化（既に実施済みだが動作確認）
- D) ブラウザの DevTools で以下を確認:
  - Console: エラー有無（特に `app.js` 404/CSP、`TypeError`）
  - Network: `app.js` が 200 で読み込まれているか、`mokekelist.txt` の fetch 結果
- E) 必要なら「直接 `mokekelist.txt` をペースト→保存→localStorage に保持」ルートを実装

ファイル一覧（主要）
- `index.html:1`
- `styles.css:1`
- `app.js:1`
- `README.md:1`

メモ
- 進捗は `localStorage` に `mokeke:v1:<リスト内容ハッシュ>` で保存。
- 文字化け対策として、JS内の日本語リテラルは Unicode エスケープを使用。

